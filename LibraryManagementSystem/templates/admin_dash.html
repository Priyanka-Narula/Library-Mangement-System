<!DOCTYPE html>
<html lang="en">
<head>
    <title>Librarian Dashboard</title>
    <link rel ="stylesheet" href="static/mainstyle.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
  <div id="main">
    <div id="canvas" style="width:auto;height: auto;">
      <div style="font-family: fantasy;" width="200px">
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
          <div class="container-fluid" >
            <a class="navbar-brand" href="#" style="font-weight: bold;">House Of books</a>
              <span>Welcome!Admin</span>
          </div>          
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0" style="font-family:Georgia, 'Times New Roman', Times, serif;
                font-weight:lighter;">
                  
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="/admin_manage">Manage</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="/logoutadmin">Logout</a>
                  </li>
                </ul>
              </div>
          </nav> 
          <h4 class="headings" style="padding-top: 5px;">Stats</h4><br>
          <div class="container">
            
            <div class="row">
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Total Books</h5>
                            <p class="card-text">{{total_books}}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Total Genre</h5>
                            <p class="card-text">{{total_genre}}</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Total Books Issued</h5>
                            <p class="card-text">{{total_request}}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
          
        <div id="admin_dash">
          <h4 class="headings" style="padding-top: 5px;">Pending Requests</h4><br>
        {% if prequest|length == 0 %}
            <h4>There are no requests to show!</h4>
        {% else %}  
          <table class="table"  >
            <thead>
              <tr>
                <th scope="col" >IID</th>
                <th scope="col" >UID</th>
                <th scope="col" >BID</th>
                <th scope="col" >Book Name</th>
                <th scope="col" >Req Date</th> 
                <th scope="col" >Return</th> 
                <th scope="col" >Action</th> </tr>
            </thead>
            <tbody>
              {%for i in prequest%}
              <tr>
                <td>{{i.id}}</td>
                <td>{{i.u_id}}</td>
                <td>{{i.b_id}}</td>
                <td>{{i.i_b_name}}</td> 
                <!-- {%for i in result%}
                <td>{{i}}</td>
                {%endfor%} -->
                <td>{{i.is_date}}</td>
                <td>{{i.ret_date}}</td>
                <td><a href="/admincancelreq/{{i.id}}" class="btn btn-danger">Deny</a></td> 
                <td><a href="/approveissue_req/{{i.id}}" class="btn btn-success">Approve</a></td>
                <!-- <td><button style="align-items: left ;padding: 5px;" type="button" class="btn btn-danger" ><a href="/cancelreq/{{i.id}}">Return</a></button> </td> -->
              </tr>
              {%endfor%}
            </tbody>
          </table> 
        {% endif %}
          <br><br>

          <h4 class="headings" style="padding-top: 5px;"> Approved Request</h4><br>
        {% if app_req|length == 0 %}
          <h4>There are no books issued!</h4>
        {% else %} 
          <table class="table" >
            <thead>
              <tr>
                <th scope="col" >IID</th>
                <th scope="col" >UID</th>
                <th scope="col" >BID</th>
                <th scope="col" >Book Name</th>
                <th scope="col" >Req Date</th> 
                <th scope="col"> Return</th> 
                <th scope="col">Action</th> </tr>
            </thead>
            <tbody>
              {%for i in app_req%}
              <tr>
                <td>{{i.id}}</td>
                <td>{{i.u_id}}</td>
                <td>{{i.b_id}}</td>
                <td>{{i.r_b_name}}</td>
                <td>{{i.req_date}}</td>
                <td>{{i.r_ret_date}}</td>
                <td><a href="/revoke/{{i.id}}" class="btn btn-warning">Revoke</a></td> 
                <!-- <td><a href="/approveissue_req/{{i.id}}">Approve</a></td> -->
                <!-- <td><button style="align-items: left ;padding: 5px;" type="button" class="btn btn-danger" ><a href="/cancelreq/{{i.id}}">Return</a></button> </td> -->
              </tr>
              {%endfor%}
            </tbody>
          </table> 
        {% endif %}
          
        </div>        
       </div>
      </div>
    </div>
    </body>
</html>